setwd("C:/Users/CarlinML/DACSS-690R/Second_Deliverable")
setwd("C:/Users/CarlinML/DACSS-690R/Second_Deliverable")
getwd()
folder="dataFiles"
fileName="Social_Media_and_Mental_Health.csv"
fileToRead=file.path(folder,fileName)
fileToRead
SMMH_data=read.csv(fileToRead)
setwd("C:/Users/CarlinML/DACSS-690R/First_Deliverable")
setwd("C:/Users/CarlinML/DACSS-690R/First_Deliverable")
getwd()
setwd("C:/Users/CarlinML/DACSS-690R/First_Deliverable")
getwd()
getwd()
getwd("C:/Users/CarlinML/DACSS-690R/First_Deliverable")
setwd("C:/Users/CarlinML/DACSS-690R/First_Deliverable")
getwd()
folder="dataFiles"
fileName="Social_Media_and_Mental_Health.csv"
fileToRead=file.path(folder,fileName)
fileToRead
SMMH_data=read.csv(fileToRead)
View(SMMH_data)
library(readxl)
folder="dataFiles"
fileName="UMassChan_ClerkshipGrades.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
ClerkshipGrades_data=read_xlsx(fileToRead)
View(ClerkshipGrades_data)
#install.packages("jsonlite")
library(jsonlite)
endPoint="https://data.lacity.org/resource/2nrs-mtv8.json"
LA_Crime_data = fromJSON(endPoint)
View(LA_Crime_data)
write.csv(LA_Crime_data, "dataFiles/Crime_Data_from_2020_to_Present_subset.csv")
setwd("C:/Users/CarlinML/DACSS-690R/Second_Deliverable")
getwd()
SMMH_dirty <- read.csv("https://github.com/DACSS-690R/First_Deliverable/raw/refs/heads/main/dataFiles/Social_Media_and_Mental_Health.csv",check.names=F)
SMMH_dirty
SMMH_dirty[,]=sapply(SMMH_dirty[,],trimws)
SMMH_clean=SMMH_dirty[,]
View(SMMH_clean)
str(SMMH_clean)
library(readxl)
destfile <- path.expand("ClerkshipGrades.xlsx")
url      <- paste0("https://github.com/DACSS-690R/First_Deliverable/raw/refs/heads/main/dataFiles/UMassChan_ClerkshipGrades.xlsx")
download.file(url, destfile = destfile, mode = "wb")
ClerkshipGrades_dirty <- read_xlsx(destfile, skip=1)
ClerkshipGrades_dirty
ClerkshipGrades_dirty[,]=sapply(ClerkshipGrades_dirty[,],trimws)
ClerkshipGrades_clean=ClerkshipGrades_dirty[,]
View(ClerkshipGrades_clean)
str(ClerkshipGrades_clean)
ClerkshipGrades_clean <- rename(ClerkshipGrades_clean,
NBME_Letter = `NBME-Written_Letter`,
NBME_Numeric = `NBME-Written_Numeric`)
table(ClerkshipGrades_clean$Subject) # no cleaning needed
table(ClerkshipGrades_clean$Catalog) # no cleaning needed
table(ClerkshipGrades_clean$Session) # no cleaning needed
table(ClerkshipGrades_clean$Location) # no cleaning needed
table(ClerkshipGrades_clean$Final_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(Final_Letter2 = recode(Final_Letter,
"HH" = "High Honors",
"H" = "Honors",
"P" = "Pass",
"S" = "Satisfactory",
"F" = "Fail",
"I" = "Incomplete"))
library("dplyr")
table(ClerkshipGrades_clean$Subject) # no cleaning needed
table(ClerkshipGrades_clean$Catalog) # no cleaning needed
table(ClerkshipGrades_clean$Session) # no cleaning needed
table(ClerkshipGrades_clean$Location) # no cleaning needed
table(ClerkshipGrades_clean$Final_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(Final_Letter2 = recode(Final_Letter,
"HH" = "High Honors",
"H" = "Honors",
"P" = "Pass",
"S" = "Satisfactory",
"F" = "Fail",
"I" = "Incomplete"))
table(ClerkshipGrades_clean$Final_Letter2)
table(ClerkshipGrades_clean$SPE_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(SPE_Letter2 = recode(SPE_Letter,
"HONORS" = "Honors"))
table(ClerkshipGrades_clean$SPE_Letter2)
table(ClerkshipGrades_clean$NBME_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(NBME_Letter2 = recode(NBME_Letter,
"HIGH HONORS" = "High Honors",
"HONORS" = "Honors",
"PASS" = "Pass"))
ClerkshipGrades_clean <- rename(ClerkshipGrades_clean,
NBME_Letter = `NBME-Written_Letter`,
NBME_Numeric = `NBME-Written_Numeric`)
table(ClerkshipGrades_clean$Subject) # no cleaning needed
table(ClerkshipGrades_clean$Catalog) # no cleaning needed
table(ClerkshipGrades_clean$Session) # no cleaning needed
table(ClerkshipGrades_clean$Location) # no cleaning needed
table(ClerkshipGrades_clean$Final_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(Final_Letter2 = recode(Final_Letter,
"HH" = "High Honors",
"H" = "Honors",
"P" = "Pass",
"S" = "Satisfactory",
"F" = "Fail",
"I" = "Incomplete"))
table(ClerkshipGrades_clean$Final_Letter2)
table(ClerkshipGrades_clean$SPE_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(SPE_Letter2 = recode(SPE_Letter,
"HONORS" = "Honors"))
table(ClerkshipGrades_clean$SPE_Letter2)
table(ClerkshipGrades_clean$NBME_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(NBME_Letter2 = recode(NBME_Letter,
"HIGH HONORS" = "High Honors",
"HONORS" = "Honors",
"PASS" = "Pass"))
table(ClerkshipGrades_clean$NBME_Letter2)
table(ClerkshipGrades_clean$OSCE_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(OSCE_Letter2 = recode(OSCE_Letter,
"HIGH HONORS" = "High Honors",
"HONORS" = "Honors",
"PASS" = "Pass"))
table(ClerkshipGrades_clean$OSCE_Letter2)
ClerkshipGrades_clean[!complete.cases(ClerkshipGrades_clean),]
ClerkshipGrades_clean[1,]
colSums(is.na(apply(ClerkshipGrades_clean[,c(10,12,14,16)],2, as.numeric)))
detectWrongNA= function(col){col[grep("[^\\d+\\.*\\d*]", col, perl=T,invert = F)]}
badSymbolNum=sapply(ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')],detectWrongNA)
badSymbolNum_unlist=unlist(badSymbolNum)
badSymbolNum_vector=unique(badSymbolNum_unlist)
badSymbolNum_vector
ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')]=lapply(ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')],function(col) ifelse((col %in% badSymbolNum_vector), NA, col))
ClerkshipGrades_clean
str(ClerkshipGrades_clean)
folder <- "DataCleanAndFormatted"
# Check if the folder exists
if (!dir.exists(folder)) {
# Create the folder
dir.create(folder)
write.csv(SMMH_clean,file.path(folder,"ClerkshipGrades_clean.csv"))
} else {
write.csv(ClerkshipGrades_clean,file.path(folder,"ClerkshipGrades_clean.csv"))}
linkClerkshipGrades_clean='https://github.com/DACSS-690R/Second_Deliverable/raw/refs/heads/main/DataCleanAndFormatted/ClerkshipGrades_clean.csv'
ClerkshipGrades_clean=read.csv(linkClerkshipGrades_clean)
str(ClerkshipGrades_clean)
ClerkshipGrades_clean[,19:22] <- lapply(ClerkshipGrades_clean[,19:22],toupper)
folder = "DataCleanAndFormatted"
# Check if the folder exists
if (!dir.exists(folder)) {
# Create the folder
dir.create(folder)
saveRDS(ClerkshipGrades_clean,file.path(folder,"
ClerkshipGrades_formatted.RDS"))
} else {
saveRDS(ClerkshipGrades_clean,file.path(folder,"ClerkshipGrades_formatted.RDS"))
}
setwd("C:/Users/CarlinML/DACSS-690R/Third_Deliverable")
getwd()
ClerkshipGrades <- readRDS(gzcon(url("https://github.com/DACSS-690R/Second_Deliverable/raw/main/DataCleanAndFormatted/ClerkshipGrades_formatted.RDS")))
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...6'] <- 'Session'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...7'] <- 'Session_Code'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Location'] <- 'Location_Code'
ClerkshipGrades$Location_new = ClerkshipGrades$Location_Description
str(ClerkshipGrades) # 6427 rows
library(readxl)
folder="Data"
fileName="Gender_Ethnicity_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Gender_Ethnicity=read_xlsx(fileToRead)
str(Gender_Ethnicity) # 1004 rows
ClerkshipGrades2 <- merge(ClerkshipGrades,Gender_Ethnicity,all.x=TRUE, by.x="ID", by.y="ID")
folder="Data"
fileName="Location_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Locations=read_xlsx(fileToRead)
str(Locations) # 22 rows
str(merge(ClerkshipGrades2,Locations, by.x='Location_new', by.y='Location'))
onlyInGrades=sort(setdiff(ClerkshipGrades2$Location_new,Locations$Location))
ClerkshipGrades2 <- merge(ClerkshipGrades,Gender_Ethnicity,all.x=TRUE, by.x="ID", by.y="ID")
str(ClerkshipGrades) # 6427 rows
library(readxl)
folder="Data"
fileName="Gender_Ethnicity_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Gender_Ethnicity=read_xlsx(fileToRead)
str(Gender_Ethnicity) # 1004 rows
ClerkshipGrades2 <- merge(ClerkshipGrades,Gender_Ethnicity,all.x=TRUE, by.x="ID", by.y="ID")
folder="Data"
fileName="Location_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Locations=read_xlsx(fileToRead)
str(Locations) # 22 rows
str(merge(ClerkshipGrades,Locations, by.x='Location_new', by.y='Location'))
onlyInGrades=sort(setdiff(ClerkshipGrades2$Location_new,Locations$Location))
ClerkshipGrades <- readRDS(gzcon(url("https://github.com/DACSS-690R/Second_Deliverable/raw/main/DataCleanAndFormatted/ClerkshipGrades_formatted.RDS")))
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...6'] <- 'Session'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...7'] <- 'Session_Code'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Location'] <- 'Location_Code'
ClerkshipGrades$Location_new = ClerkshipGrades$Location_Description
str(ClerkshipGrades) # 6427 rows
ClerkshipGrades2 <- merge(ClerkshipGrades,Gender_Ethnicity,all.x=TRUE, by.x="ID", by.y="ID")
View(Gender_Ethnicity) # 1004 rows
View(ClerkshipGrades) # 6427 rows
library(readxl)
destfile <- path.expand("ClerkshipGrades.xlsx")
url      <- paste0("https://github.com/DACSS-690R/First_Deliverable/raw/refs/heads/main/dataFiles/UMassChan_ClerkshipGrades.xlsx")
download.file(url, destfile = destfile, mode = "wb")
ClerkshipGrades_dirty <- read_xlsx(destfile, skip=1)
ClerkshipGrades_dirty
library(readxl)
destfile <- path.expand("ClerkshipGrades.xlsx")
url      <- paste0("https://github.com/DACSS-690R/First_Deliverable/raw/refs/heads/main/dataFiles/UMassChan_ClerkshipGrades.xlsx")
download.file(url, destfile = destfile, mode = "wb")
ClerkshipGrades_dirty <- read_xlsx(destfile, skip=1)
ClerkshipGrades_dirty
library(readxl)
destfile <- path.expand("ClerkshipGrades.xlsx")
url      <- paste0("https://github.com/DACSS-690R/First_Deliverable/raw/refs/heads/main/dataFiles/UMassChan_ClerkshipGrades.xlsx")
download.file(url, destfile = destfile, mode = "wb")
ClerkshipGrades_dirty <- read_xlsx(destfile, skip=1)
ClerkshipGrades_dirty
ClerkshipGrades_dirty[,]=sapply(ClerkshipGrades_dirty[,],trimws)
ClerkshipGrades_clean=ClerkshipGrades_dirty[,]
View(ClerkshipGrades_clean)
str(ClerkshipGrades_clean)
ClerkshipGrades_clean <- rename(ClerkshipGrades_clean,
NBME_Letter = `NBME-Written_Letter`,
NBME_Numeric = `NBME-Written_Numeric`)
table(ClerkshipGrades_clean$Subject) # no cleaning needed
table(ClerkshipGrades_clean$Catalog) # no cleaning needed
table(ClerkshipGrades_clean$Session) # no cleaning needed
table(ClerkshipGrades_clean$Location) # no cleaning needed
table(ClerkshipGrades_clean$Final_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(Final_Letter2 = recode(Final_Letter,
"HH" = "High Honors",
"H" = "Honors",
"P" = "Pass",
"S" = "Satisfactory",
"F" = "Fail",
"I" = "Incomplete"))
table(ClerkshipGrades_clean$Final_Letter2)
table(ClerkshipGrades_clean$SPE_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(SPE_Letter2 = recode(SPE_Letter,
"HONORS" = "Honors"))
table(ClerkshipGrades_clean$SPE_Letter2)
table(ClerkshipGrades_clean$NBME_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(NBME_Letter2 = recode(NBME_Letter,
"HIGH HONORS" = "High Honors",
"HONORS" = "Honors",
"PASS" = "Pass"))
table(ClerkshipGrades_clean$NBME_Letter2)
table(ClerkshipGrades_clean$OSCE_Letter)
ClerkshipGrades_clean <- ClerkshipGrades_clean %>%
mutate(OSCE_Letter2 = recode(OSCE_Letter,
"HIGH HONORS" = "High Honors",
"HONORS" = "Honors",
"PASS" = "Pass"))
table(ClerkshipGrades_clean$OSCE_Letter2)
ClerkshipGrades_clean[!complete.cases(ClerkshipGrades_clean),]
ClerkshipGrades_clean[1,]
colSums(is.na(apply(ClerkshipGrades_clean[,c(10,12,14,16)],2, as.numeric)))
detectWrongNA= function(col){col[grep("[^\\d+\\.*\\d*]", col, perl=T,invert = F)]}
badSymbolNum=sapply(ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')],detectWrongNA)
badSymbolNum_unlist=unlist(badSymbolNum)
badSymbolNum_vector=unique(badSymbolNum_unlist)
badSymbolNum_vector
ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')]=lapply(ClerkshipGrades_clean[, c('Final_Numeric','SPE_Numeric','NBME_Numeric', 'OSCE_Numeric')],function(col) ifelse((col %in% badSymbolNum_vector), NA, col))
ClerkshipGrades_clean
str(ClerkshipGrades_clean)
folder <- "DataCleanAndFormatted"
# Check if the folder exists
if (!dir.exists(folder)) {
# Create the folder
dir.create(folder)
write.csv(SMMH_clean,file.path(folder,"ClerkshipGrades_clean.csv"))
} else {
write.csv(ClerkshipGrades_clean,file.path(folder,"ClerkshipGrades_clean.csv"))}
linkClerkshipGrades_clean='https://github.com/DACSS-690R/Second_Deliverable/raw/refs/heads/main/DataCleanAndFormatted/ClerkshipGrades_clean.csv'
ClerkshipGrades_clean=read.csv(linkClerkshipGrades_clean)
str(ClerkshipGrades_clean)
setwd("C:/Users/CarlinML/DACSS-690R/Third_Deliverable")
getwd()
setwd("C:/Users/CarlinML/DACSS-690R/Third_Deliverable")
getwd()
ClerkshipGrades <- readRDS(gzcon(url("https://github.com/DACSS-690R/Second_Deliverable/raw/main/DataCleanAndFormatted/ClerkshipGrades_formatted.RDS")))
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...6'] <- 'Session'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Session...7'] <- 'Session_Code'
names(ClerkshipGrades)[names(ClerkshipGrades) == 'Location'] <- 'Location_Code'
ClerkshipGrades$Location_new = ClerkshipGrades$Location_Description
View(ClerkshipGrades) # 6427 rows
library(readxl)
folder="Data"
fileName="Gender_Ethnicity_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Gender_Ethnicity=read_xlsx(fileToRead)
str(Gender_Ethnicity) # 1004 rows
ClerkshipGrades2 <- merge(ClerkshipGrades,Gender_Ethnicity,all.x=TRUE, by.x="Student_ID", by.y="ID")
str(ClerkshipGrades2) # 6427 rows
folder="Data"
fileName="Location_info.xlsx"
fileToRead=file.path(folder,fileName)
fileToRead
Locations=read_xlsx(fileToRead)
str(Locations) # 22 rows
str(merge(ClerkshipGrades,Locations, by.x='Location_new', by.y='Location'))
str(Locations) # 22 rows
str(merge(ClerkshipGrades2,Locations, by.x='Location_new', by.y='Location'))
str(ClerkshipGrades2) # 6427 rows
str(merge(ClerkshipGrades2,Locations, by.x='Location_code', by.y='Location'))
ClerkshipGrades_withLoc <- readRDS("C:/Users/CarlinML/DACSS-690R/Third_Deliverable/DataConcatenatedMerged/ClerkshipGrades_withLoc.RDS")
